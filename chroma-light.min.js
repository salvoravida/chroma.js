/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */

!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.chroma=r()}(this,function(){"use strict";for(var n=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=1),t<r?r:n<t?n:t},r={},t=0,e=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];t<e.length;t+=1){var o=e[t];r["[object "+o+"]"]=o.toLowerCase()}var a=function(t){return r[Object.prototype.toString.call(t)]||"object"},i=(Math.PI,function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var r=0;r<=3;r++)r<3?((t[r]<0||255<t[r])&&(t._clipped=!0),t[r]=n(t[r],0,255)):3===r&&(t[r]=n(t[r],0,1));return t}),u=a,c=function(r,t){return void 0===t&&(t=null),3<=r.length?Array.prototype.slice.call(r):"object"==a(r[0])&&t?t.split("").filter(function(t){return void 0!==r[0][t]}).map(function(t){return r[0][t]}):r[0]},l=function(t){if(t.length<2)return null;var r=t.length-1;return"string"==a(t[r])?t[r].toLowerCase():null},f={format:{},autodetect:[]},h=l,p=i,s=u,g=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if("object"===s(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var n=h(t),e=!1;if(!n){e=!0,f.sorted||(f.autodetect=f.autodetect.sort(function(t,r){return r.p-t.p}),f.sorted=!0);for(var o=0,a=f.autodetect;o<a.length;o+=1){var i=a[o];if(n=i.test.apply(i,t))break}}if(!f.format[n])throw new Error("unknown format: "+t);var u=f.format[n].apply(null,e?t:t.slice(0,-1));this._rgb=p(u),3===this._rgb.length&&this._rgb.push(1)};g.prototype.toString=function(){return"function"==s(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var A=g,b=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(b.Color,[null].concat(t)))};b.Color=A,b.version="2.1.1";var v=b,d=c,y=l,w=Math.round,m=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=d(t,"rgba"),e=n[0],o=n[1],a=n[2],i=n[3],u=y(t)||"auto";void 0===i&&(i=1),"auto"===u&&(u=i<1?"rgba":"rgb");var c="000000"+((e=w(e))<<16|(o=w(o))<<8|(a=w(a))).toString(16);c=c.substr(c.length-6);var l="0"+w(255*i).toString(16);switch(l=l.substr(l.length-2),u.toLowerCase()){case"rgba":return"#"+c+l;case"argb":return"#"+l+c;default:return"#"+c}},_=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,x=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,M=function(t){if(t.match(_)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var r=parseInt(t,16);return[r>>16,r>>8&255,255&r,1]}if(t.match(x)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},F=u;A.prototype.hex=function(t){return m(this._rgb,t)},v.hex=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(A,[null].concat(t,["hex"])))},f.format.hex=M,f.autodetect.push({p:4,test:function(t){for(var r=[],n=arguments.length-1;0<n--;)r[n]=arguments[n+1];if(!r.length&&"string"===F(t)&&0<=[3,4,5,6,7,8,9].indexOf(t.length))return"hex"}});var k=c,j=u,N=Math.round;A.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(N)},A.prototype.rgba=function(n){return void 0===n&&(n=!0),this._rgb.slice(0,4).map(function(t,r){return r<3?!1===n?t:N(t):t})},v.rgb=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(A,[null].concat(t,["rgb"])))},f.format.rgb=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=k(t,"rgba");return void 0===n[3]&&(n[3]=1),n},f.autodetect.push({p:3,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=k(t,"rgba"),"array"===j(t)&&(3===t.length||4===t.length&&"number"==j(t[3])&&0<=t[3]&&t[3]<=1))return"rgb"}});var C=u;A.prototype.alpha=function(t,r){return void 0===r&&(r=!1),void 0!==t&&"number"===C(t)?r?(this._rgb[3]=t,this):new A([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]};var E=18,S=.95047,I=1,L=1.08883,O=.137931034,P=.206896552,$=.12841855,q=.008856452,B=c,D=Math.pow,R=function(t){return(t/=255)<=.04045?t/12.92:D((t+.055)/1.055,2.4)},U=function(t){return q<t?D(t,1/3):t/$+O},z=function(t,r,n){return t=R(t),r=R(r),n=R(n),[U((.4124564*t+.3575761*r+.1804375*n)/S),U((.2126729*t+.7151522*r+.072175*n)/I),U((.0193339*t+.119192*r+.9503041*n)/L)]},G=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=B(t,"rgb"),e=n[0],o=n[1],a=n[2],i=z(e,o,a),u=i[0],c=i[1],l=116*c-16;return[l<0?0:l,500*(u-c),200*(c-i[2])]},H=c,J=Math.pow,K=function(t){return 255*(t<=.00304?12.92*t:1.055*J(t,1/2.4)-.055)},Q=function(t){return P<t?t*t*t:$*(t-O)},T=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n,e,o,a=(t=H(t,"lab"))[0],i=t[1],u=t[2];return e=(a+16)/116,n=isNaN(i)?e:e+i/500,o=isNaN(u)?e:e-u/200,e=I*Q(e),n=S*Q(n),o=L*Q(o),[K(3.2404542*n-1.5371385*e-.4985314*o),K(-.969266*n+1.8760108*e+.041556*o),K(.0556434*n-.2040259*e+1.0572252*o),3<t.length?t[3]:1]},V=c,W=u;A.prototype.lab=function(){return G(this._rgb)},v.lab=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(A,[null].concat(t,["lab"])))},f.format.lab=T,f.autodetect.push({p:2,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=V(t,"lab"),"array"===W(t)&&3===t.length)return"lab"}}),A.prototype.darken=function(t){void 0===t&&(t=1);var r=this.lab();return r[0]-=E*t,new A(r,"lab").alpha(this.alpha(),!0)},A.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},A.prototype.darker=A.prototype.darken,A.prototype.brighter=A.prototype.brighten,A.prototype.get=function(t){var r=t.split("."),n=r[0],e=r[1],o=this[n]();if(e){var a=n.indexOf(e);if(-1<a)return o[a];throw new Error("unknown channel "+e+" in mode "+n)}return o};var X=u,Y=Math.pow;A.prototype.luminance=function(o){if(void 0===o||"number"!==X(o))return Z.apply(void 0,this._rgb.slice(0,3));if(0===o)return new A([0,0,0,this._rgb[3]],"rgb");if(1===o)return new A([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),a=20,i=function(t,r){var n=t.interpolate(r,.5,"rgb"),e=n.luminance();return Math.abs(o-e)<1e-7||!a--?n:o<e?i(t,n):i(n,r)},r=(o<t?i(new A([0,0,0]),this):i(this,new A([255,255,255]))).rgb();return new A(r.concat([this._rgb[3]]))};var Z=function(t,r,n){return.2126*(t=tt(t))+.7152*(r=tt(r))+.0722*(n=tt(n))},tt=function(t){return(t/=255)<=.03928?t/12.92:Y((t+.055)/1.055,2.4)},rt=Math.sqrt,nt=Math.atan2,et=Math.abs,ot=Math.cos,at=Math.PI;return v.contrast=function(t,r){t=new A(t),r=new A(r);var n=t.luminance(),e=r.luminance();return e<n?(n+.05)/(e+.05):(e+.05)/(n+.05)},v.deltaE=function(t,r,n,e){void 0===n&&(n=1),void 0===e&&(e=1),t=new A(t),r=new A(r);for(var o=Array.from(t.lab()),a=o[0],i=o[1],u=o[2],c=Array.from(r.lab()),l=c[0],f=c[1],h=c[2],p=rt(i*i+u*u),s=rt(f*f+h*h),g=a<16?.511:.040975*a/(1+.01765*a),b=.0638*p/(1+.0131*p)+.638,v=p<1e-6?0:180*nt(u,i)/at;v<0;)v+=360;for(;360<=v;)v-=360;var d=164<=v&&v<=345?.56+et(.2*ot(at*(v+168)/180)):.36+et(.4*ot(at*(v+35)/180)),y=p*p*p*p,w=rt(y/(y+1900)),m=b*(w*d+1-w),_=p-s,x=i-f,M=u-h,F=(a-l)/(n*g),k=_/(e*b);return rt(F*F+k*k+(x*x+M*M-_*_)/(m*m))},v.valid=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];try{return new(Function.prototype.bind.apply(A,[null].concat(t))),!0}catch(t){return!1}},v});
